{% extends 'base.html' %}

{% block title %}Change Password - Pasons Dashboard{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto;">
    <div style="background: white; border-radius: 8px; padding: 32px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h2 style="font-size: 24px; font-weight: 600; color: #1f2937; margin-bottom: 8px;">Change Password</h2>
        <p style="font-size: 14px; color: #6b7280; margin-bottom: 24px;">Update your password to keep your account secure</p>
        
        <form method="POST" action="{% url 'change_password' %}">
            {% csrf_token %}
            
            <!-- Current Password -->
            <div style="margin-bottom: 20px;">
                <label for="current_password" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">
                    Current Password
                </label>
                <input 
                    type="password" 
                    id="current_password" 
                    name="current_password" 
                    required
                    style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; transition: all 0.2s;"
                    onfocus="this.style.borderColor='#4f46e5'; this.style.outline='none';"
                    onblur="this.style.borderColor='#d1d5db';"
                >
            </div>
            
            <!-- New Password -->
            <div style="margin-bottom: 20px;">
                <label for="new_password" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">
                    New Password
                </label>
                <input 
                    type="password" 
                    id="new_password" 
                    name="new_password" 
                    required
                    minlength="8"
                    style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; transition: all 0.2s;"
                    onfocus="this.style.borderColor='#4f46e5'; this.style.outline='none';"
                    onblur="this.style.borderColor='#d1d5db';"
                >
                <p style="font-size: 12px; color: #6b7280; margin-top: 4px;">Must be at least 8 characters long</p>
            </div>
            
            <!-- Confirm Password -->
            <div style="margin-bottom: 24px;">
                <label for="confirm_password" style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px;">
                    Confirm New Password
                </label>
                <input 
                    type="password" 
                    id="confirm_password" 
                    name="confirm_password" 
                    required
                    minlength="8"
                    style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; transition: all 0.2s;"
                    onfocus="this.style.borderColor='#4f46e5'; this.style.outline='none';"
                    onblur="this.style.borderColor='#d1d5db';"
                >
            </div>
            
            <!-- Buttons -->
            <div style="display: flex; gap: 12px;">
                <button 
                    type="submit"
                    style="flex: 1; padding: 10px 16px; background: #4f46e5; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s;"
                    onmouseover="this.style.backgroundColor='#4338ca'"
                    onmouseout="this.style.backgroundColor='#4f46e5'"
                >
                    <i class="bi bi-check-circle" style="margin-right: 6px;"></i>
                    Change Password
                </button>
                <a 
                    href="{% url 'dashboard' %}"
                    style="flex: 1; padding: 10px 16px; background: #f3f4f6; color: #6b7280; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; font-weight: 500; text-align: center; text-decoration: none; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center;"
                    onmouseover="this.style.backgroundColor='#e5e7eb'"
                    onmouseout="this.style.backgroundColor='#f3f4f6'"
                >
                    <i class="bi bi-x-circle" style="margin-right: 6px;"></i>
                    Cancel
                </a>
            </div>
        </form>
        
        <!-- Password Requirements -->
        <div style="margin-top: 24px; padding: 16px; background: #f9fafb; border-radius: 6px; border: 1px solid #e5e7eb;">
            <h3 style="font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                <i class="bi bi-info-circle" style="margin-right: 6px;"></i>
                Password Requirements
            </h3>
            <ul style="font-size: 12px; color: #6b7280; margin: 0; padding-left: 20px;">
                <li>At least 8 characters long</li>
                <li>Mix of uppercase and lowercase letters (recommended)</li>
                <li>Include numbers and special characters (recommended)</li>
            </ul>
        </div>
    </div>
</div>

<script>
    // Client-side password match validation
    document.querySelector('form').addEventListener('submit', function(e) {
        const newPassword = document.getElementById('new_password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        
        if (newPassword !== confirmPassword) {
            e.preventDefault();
            alert('New passwords do not match!');
            return false;
        }
        
        if (newPassword.length < 8) {
            e.preventDefault();
            alert('Password must be at least 8 characters long!');
            return false;
        }
    });
</script>
{% endblock %}
