{% extends 'base.html' %}

{% block title %}Edit Store - Dashboard{% endblock %}

{% block content %}
<div class="p-6 mb-8 rounded-lg border" style="background-color: #E8EEF4; border: 1px solid #C5C5C5; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <div class="flex items-center gap-3 mb-6">
        <i class="bi bi-pencil-square text-2xl" style="color: #0066CC;"></i>
        <h2 class="text-xl font-semibold" style="color: #333333; font-family: Arial, sans-serif;">Edit Store</h2>
    </div>

    <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Left Column -->
            <div class="space-y-4">
                <div>
                    <label class="block mb-2 text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">
                        <i class="bi bi-shop mr-2" style="color: #0066CC;"></i>Store Name *
                    </label>
                    <input type="text" name="name" required placeholder="Enter store name" value="{{ outlet.name }}"
                           style="width: 100%; padding: 12px; border: 1px solid #C5C5C5; border-radius: 6px; font-family: Arial, sans-serif; font-size: 14px; color: #333333;"/>
                </div>
                
                <div>
                    <label class="block mb-2 text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">
                        <i class="bi bi-geo-alt mr-2" style="color: #0066CC;"></i>Location *
                    </label>
                    <input type="text" name="location" required placeholder="Enter store location" value="{{ outlet.location }}"
                           style="width: 100%; padding: 12px; border: 1px solid #C5C5C5; border-radius: 6px; font-family: Arial, sans-serif; font-size: 14px; color: #333333;"/>
                </div>
                
                <div>
                    <label class="block mb-2 text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">
                        <i class="bi bi-layers mr-2" style="color: #0066CC;"></i>Platform *
                    </label>
                    <select name="platforms" required 
                             style="width: 100%; padding: 12px; border: 1px solid #C5C5C5; border-radius: 6px; font-family: Arial, sans-serif; font-size: 14px; color: #333333; background-color: white;">
                         <option value="pasons" {% if outlet.platforms == 'pasons' %}selected{% endif %}>Pasons Ecommerce</option>
                         <option value="talabat" {% if outlet.platforms == 'talabat' %}selected{% endif %}>Talabat Platform</option>
                     </select>
                </div>
            </div>
            
            <!-- Right Column - Store Info -->
            <div class="space-y-4">
                <div class="p-4 rounded-lg" style="background-color: #F8F9FA; border: 1px solid #E5E7EB;">
                    <div class="space-y-3">
                        <div class="flex items-center gap-2">
                            <i class="bi bi-hash text-lg" style="color: #0066CC;"></i>
                            <span class="text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">Store ID:</span>
                            <span class="px-2 py-1 rounded text-xs font-mono" style="background-color: #E3F2FD; color: #0066CC; border: 1px solid #BBDEFB;">
                                {{ outlet.store_id }}
                            </span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="bi bi-layers text-lg" style="color: #0066CC;"></i>
                            <span class="text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">Platform:</span>
                            {% if outlet.platforms == 'pasons' %}
                                <span class="px-2 py-1 rounded text-xs" style="background-color: #E8F5E9; color: #70AD47; border: 1px solid #C8E6C9;">
                                    <i class="bi bi-shop mr-1"></i>Pasons
                                </span>
                            {% elif outlet.platforms == 'talabat' %}
                                <span class="px-2 py-1 rounded text-xs" style="background-color: #FFF3E0; color: #F57C00; border: 1px solid #FFCC80;">
                                    <i class="bi bi-truck mr-1"></i>Talabat
                                </span>
                            {% else %}
                                <span class="px-2 py-1 rounded text-xs" style="background-color: #F3E5F5; color: #9C27B0; border: 1px solid #CE93D8;">
                                    <i class="bi bi-layers mr-1"></i>Both
                                </span>
                            {% endif %}
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="bi bi-calendar text-lg" style="color: #0066CC;"></i>
                            <span class="text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">Created:</span>
                            <span class="text-sm" style="color: #666666; font-family: Arial, sans-serif;">{{ outlet.created_at|date:"M d, Y" }}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="bi bi-clock text-lg" style="color: #0066CC;"></i>
                            <span class="text-sm font-semibold" style="color: #333333; font-family: Arial, sans-serif;">Last Updated:</span>
                            <span class="text-sm" style="color: #666666; font-family: Arial, sans-serif;">{{ outlet.updated_at|date:"M d, Y" }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Info Box -->
        <div class="p-4 rounded-lg" style="background-color: #FFF3CD; border: 1px solid #FFEAA7;">
            <div class="flex items-start gap-3">
                <i class="bi bi-exclamation-triangle-fill text-lg" style="color: #856404;"></i>
                <div>
                    <h4 class="font-semibold mb-2" style="color: #856404; font-family: Arial, sans-serif;">Platform Change Warning</h4>
                    <p class="text-sm" style="color: #856404; font-family: Arial, sans-serif;">
                        Changing the platform will generate a new Store ID based on the selected platform. The current Store ID ({{ outlet.store_id }}) will be preserved but a new ID will be assigned if the platform changes.
                    </p>
                    <ul class="text-sm mt-2" style="color: #856404; font-family: Arial, sans-serif;">
                         <li>• <strong>Pasons:</strong> P100001, P100002, etc.</li>
                         <li>• <strong>Talabat:</strong> T100001, T100002, etc.</li>
                     </ul>
                     <p class="text-sm mt-2" style="color: #856404; font-family: Arial, sans-serif;">
                         <strong>Note:</strong> Each store should be created for a specific platform. If you need the same store on both platforms, create separate stores for each.
                     </p>
                </div>
            </div>
        </div>
        
        <!-- Buttons -->
        <div class="flex gap-4 pt-4">
            <button type="submit" class="px-6 py-3 rounded-lg font-medium" 
                    style="background-color: #0066CC; color: white; border: 1px solid #0055AA; cursor: pointer; font-family: Arial, sans-serif;"
                    onmouseover="this.style.backgroundColor='#0055AA'" 
                    onmouseout="this.style.backgroundColor='#0066CC'">
                <i class="bi bi-check-circle mr-2"></i>Update Store
            </button>
            
            <a href="{% url 'integration:store_list' %}" class="px-6 py-3 rounded-lg font-medium" 
               style="background-color: #6C757D; color: white; text-decoration: none; border: 1px solid #5A6268; font-family: Arial, sans-serif;"
               onmouseover="this.style.backgroundColor='#5A6268'" 
               onmouseout="this.style.backgroundColor='#6C757D'">
                <i class="bi bi-arrow-left mr-2"></i>Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}